{"ast":null,"code":"import _classCallCheck from \"/Users/irfan/projects/local/trunk-user-interface-stand-alone/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/irfan/projects/local/trunk-user-interface-stand-alone/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/Users/irfan/projects/local/trunk-user-interface-stand-alone/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/Users/irfan/projects/local/trunk-user-interface-stand-alone/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"/Users/irfan/projects/local/trunk-user-interface-stand-alone/src/public/enquiry/enquiryList.js\";\nimport React, { Component } from 'react';\nimport { CCard, CCardBody, CCol, CFade, CRow } from '@coreui/react';\nimport CIcon from '@coreui/icons-react';\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\nimport PartDetails from './container/partDetails';\nimport { loadEnquiryCarDetails, loadEnquiryPartDetails, deleteEnquiry } from 'src/modules/enquiry/actions';\nimport { Link } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nvar EnquiryList = /*#__PURE__*/function (_Component) {\n  _inherits(EnquiryList, _Component);\n\n  var _super = _createSuper(EnquiryList);\n\n  function EnquiryList(props) {\n    var _this;\n\n    _classCallCheck(this, EnquiryList);\n\n    _this = _super.call(this, props);\n\n    _this.loadEnquiryCarDetails = function () {\n      var params = new URLSearchParams(_this.props.location.search);\n      var page = parseInt(params.get('page')) || 1; // if(this.props.pager.totalItems === 0)\n      // {\n      //   var currentPage = 1;\n      //   var page = 0;\n      // }\n      // else\n      // {\n      //   var currentPage = this.props.pager.currentPage;\n      //   var page = parseInt(params.get('page'));\n      // }\n\n      if (page !== _this.props.pager.currentPage) {\n        var query = {};\n        query.pages = page;\n\n        _this.props.loadEnquiryCarDetails({\n          query: query\n        });\n      }\n    };\n\n    _this.delete = function (id) {\n      if (window.confirm(\"Are you sure?\")) {\n        _this.props.deleteEnquiry({\n          id: id\n        });\n      }\n    };\n\n    _this.edit = function (id) {\n      if (window.confirm(\"Are you sure?\")) {\n        // this.props.history.push({\n        //   pathname: './enquiry-vehicle',\n        //   state: {\n        //     enquiryID: id,\n        //   },\n        // })\n        _this.props.history.push(\"./edit-enquiry-vehicle/\".concat(id));\n      }\n    };\n\n    _this.state = {\n      EnquiryID: ''\n    };\n    return _this;\n  }\n\n  _createClass(EnquiryList, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.loadEnquiryCarDetails();\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      // if (prevProps.pager.currentPage e) {\n      //   this.loadEnquiryCarDetails();\n      // }\n      if (prevProps.pager.totalItems > 0) {\n        this.loadEnquiryCarDetails();\n      }\n    }\n  }, {\n    key: \"formatAMPM\",\n    value: function formatAMPM(date) {\n      var hours = date.getHours();\n      var minutes = date.getMinutes();\n      var ampm = hours >= 12 ? 'pm' : 'am';\n      hours = hours % 12;\n      hours = hours ? hours : 12;\n      minutes = minutes < 10 ? '0' + minutes : minutes;\n      var strTime = hours + ':' + minutes + ' ' + ampm;\n      return strTime;\n    }\n  }, {\n    key: \"getPartDetail\",\n    value: function getPartDetail(id) {\n      var datas = {};\n      datas.enquiryID = id;\n      this.props.loadEnquiryPartDetails(datas);\n      this.setState({\n        EnquiryID: id\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props = this.props,\n          data = _this$props.data,\n          partDetails = _this$props.partDetails,\n          pager = _this$props.pager,\n          enquiryList = _this$props.enquiryList;\n      return /*#__PURE__*/_jsxDEV(CRow, {\n        className: \"text-center justify-content-center list-table\",\n        children: /*#__PURE__*/_jsxDEV(CCol, {\n          xs: \"12\",\n          sm: \"12\",\n          lg: \"12\",\n          children: /*#__PURE__*/_jsxDEV(CFade, {\n            children: /*#__PURE__*/_jsxDEV(CCard, {\n              children: /*#__PURE__*/_jsxDEV(CCardBody, {\n                children: /*#__PURE__*/_jsxDEV(\"table\", {\n                  className: \"table table-striped\",\n                  children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n                    children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                      children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                        children: \"#\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 112,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                        children: \"Customer\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 113,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                        children: \"Chassis number\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 114,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                        children: \"Vehicle\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 115,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                        children: \"Item\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 116,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                        children: \"Enquiry Date\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 117,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                        children: \"Status\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 118,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                        children: \"Action\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 120,\n                        columnNumber: 25\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 111,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 110,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n                    children: enquiryList ? enquiryList.map(function (item, index) {\n                      var date = new Date(item.CreatedOn);\n                      var longMonth = date.toLocaleString('en-us', {\n                        month: 'long'\n                      });\n                      var day = date.getDate();\n                      var year = date.getFullYear();\n\n                      var time = _this2.formatAMPM(date);\n\n                      var items = item.enquiryPartHeaders;\n                      return /*#__PURE__*/_jsxDEV(_Fragment, {\n                        children: [/*#__PURE__*/_jsxDEV(\"tr\", {\n                          className: \"expandable-row\",\n                          children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                            onClick: function onClick() {\n                              return _this2.getPartDetail(item.ID);\n                            },\n                            children: pager.pages && pager.pages.length ? pager.startIndex + index + 1 : index + 1\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 136,\n                            columnNumber: 33\n                          }, _this2), /*#__PURE__*/_jsxDEV(\"td\", {\n                            onClick: function onClick() {\n                              return _this2.getPartDetail(item.ID);\n                            },\n                            children: item.customer.CompanyName\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 137,\n                            columnNumber: 33\n                          }, _this2), /*#__PURE__*/_jsxDEV(\"td\", {\n                            onClick: function onClick() {\n                              return _this2.getPartDetail(item.ID);\n                            },\n                            children: item.ChassisNO\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 138,\n                            columnNumber: 33\n                          }, _this2), /*#__PURE__*/_jsxDEV(\"td\", {\n                            onClick: function onClick() {\n                              return _this2.getPartDetail(item.ID);\n                            },\n                            children: [item.manufacture.Name, \", \", item.Year, \", \", item.car.CarName, \", \", item.Variant]\n                          }, void 0, true, {\n                            fileName: _jsxFileName,\n                            lineNumber: 139,\n                            columnNumber: 33\n                          }, _this2), /*#__PURE__*/_jsxDEV(\"td\", {\n                            onClick: function onClick() {\n                              return _this2.getPartDetail(item.ID);\n                            },\n                            children: items.filter(function (e) {\n                              return e.PartNumber !== 'parentHeader';\n                            }).length\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 140,\n                            columnNumber: 33\n                          }, _this2), /*#__PURE__*/_jsxDEV(\"td\", {\n                            onClick: function onClick() {\n                              return _this2.getPartDetail(item.ID);\n                            },\n                            children: [day, \" \", longMonth, \" \", year, \", \", time]\n                          }, void 0, true, {\n                            fileName: _jsxFileName,\n                            lineNumber: 141,\n                            columnNumber: 33\n                          }, _this2), /*#__PURE__*/_jsxDEV(\"td\", {\n                            onClick: function onClick() {\n                              return _this2.getPartDetail(item.ID);\n                            },\n                            children: /*#__PURE__*/_jsxDEV(\"span\", {\n                              className: \"badge badge-pill badge-danger\",\n                              children: items.filter(function (e) {\n                                return e.PartNumber !== 'parentHeader';\n                              }).length === 0 ? 'Pending' : 'Open'\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 142,\n                              columnNumber: 82\n                            }, _this2)\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 142,\n                            columnNumber: 33\n                          }, _this2), /*#__PURE__*/_jsxDEV(\"td\", {\n                            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                              onClick: function onClick() {\n                                return _this2.edit(item.ID);\n                              },\n                              className: \"action-button\",\n                              children: /*#__PURE__*/_jsxDEV(CIcon, {\n                                name: \"cil-pencil\",\n                                height: \"18\",\n                                alt: \"edit\"\n                              }, void 0, false, {\n                                fileName: _jsxFileName,\n                                lineNumber: 148,\n                                columnNumber: 37\n                              }, _this2)\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 147,\n                              columnNumber: 35\n                            }, _this2), /*#__PURE__*/_jsxDEV(\"button\", {\n                              onClick: function onClick() {\n                                return _this2.delete(item.ID);\n                              },\n                              className: \"action-button\",\n                              children: /*#__PURE__*/_jsxDEV(CIcon, {\n                                name: \"cil-trash\",\n                                height: \"18\",\n                                alt: \"delete\"\n                              }, void 0, false, {\n                                fileName: _jsxFileName,\n                                lineNumber: 151,\n                                columnNumber: 37\n                              }, _this2)\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 150,\n                              columnNumber: 35\n                            }, _this2)]\n                          }, void 0, true, {\n                            fileName: _jsxFileName,\n                            lineNumber: 143,\n                            columnNumber: 33\n                          }, _this2)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 134,\n                          columnNumber: 29\n                        }, _this2), item.ID === _this2.state.EnquiryID ? /*#__PURE__*/_jsxDEV(PartDetails, {\n                          partDetails: partDetails\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 157,\n                          columnNumber: 33\n                        }, _this2) : null]\n                      }, void 0, true);\n                    }) : null\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 123,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"tfoot\", {\n                    children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                      children: /*#__PURE__*/_jsxDEV(\"td\", {\n                        colSpan: \"9\",\n                        children: /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"float-right\",\n                          children: pager.pages && pager.pages.length && /*#__PURE__*/_jsxDEV(\"ul\", {\n                            className: \"pagination\",\n                            children: [/*#__PURE__*/_jsxDEV(\"li\", {\n                              className: \"page-item first-item \".concat(pager.currentPage === 1 ? 'disabled' : ''),\n                              children: /*#__PURE__*/_jsxDEV(Link, {\n                                to: {\n                                  search: \"?page=1\"\n                                },\n                                className: \"page-link\",\n                                children: \"First\"\n                              }, void 0, false, {\n                                fileName: _jsxFileName,\n                                lineNumber: 174,\n                                columnNumber: 41\n                              }, this)\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 173,\n                              columnNumber: 37\n                            }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                              className: \"page-item previous-item \".concat(pager.currentPage === 1 ? 'disabled' : ''),\n                              children: /*#__PURE__*/_jsxDEV(Link, {\n                                to: {\n                                  search: \"?page=\".concat(pager.currentPage - 1)\n                                },\n                                className: \"page-link\",\n                                children: \"Previous\"\n                              }, void 0, false, {\n                                fileName: _jsxFileName,\n                                lineNumber: 177,\n                                columnNumber: 41\n                              }, this)\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 176,\n                              columnNumber: 37\n                            }, this), pager.pages.map(function (page) {\n                              return /*#__PURE__*/_jsxDEV(\"li\", {\n                                className: \"page-item number-item \".concat(pager.currentPage === page ? 'active' : ''),\n                                children: /*#__PURE__*/_jsxDEV(Link, {\n                                  id: pager.currentPage,\n                                  to: {\n                                    search: \"?page=\".concat(page)\n                                  },\n                                  className: \"page-link\",\n                                  children: page\n                                }, void 0, false, {\n                                  fileName: _jsxFileName,\n                                  lineNumber: 181,\n                                  columnNumber: 45\n                                }, _this2)\n                              }, page, false, {\n                                fileName: _jsxFileName,\n                                lineNumber: 180,\n                                columnNumber: 41\n                              }, _this2);\n                            }), /*#__PURE__*/_jsxDEV(\"li\", {\n                              className: \"page-item next-item \".concat(pager.currentPage === pager.totalPages ? 'disabled' : ''),\n                              children: /*#__PURE__*/_jsxDEV(Link, {\n                                to: {\n                                  search: \"?page=\".concat(pager.currentPage + 1)\n                                },\n                                className: \"page-link\",\n                                children: \"Next\"\n                              }, void 0, false, {\n                                fileName: _jsxFileName,\n                                lineNumber: 185,\n                                columnNumber: 41\n                              }, this)\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 184,\n                              columnNumber: 37\n                            }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                              className: \"page-item last-item \".concat(pager.currentPage === pager.totalPages ? 'disabled' : ''),\n                              children: /*#__PURE__*/_jsxDEV(Link, {\n                                to: {\n                                  search: \"?page=\".concat(pager.totalPages)\n                                },\n                                className: \"page-link\",\n                                children: \"Last\"\n                              }, void 0, false, {\n                                fileName: _jsxFileName,\n                                lineNumber: 188,\n                                columnNumber: 41\n                              }, this)\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 187,\n                              columnNumber: 37\n                            }, this)]\n                          }, void 0, true, {\n                            fileName: _jsxFileName,\n                            lineNumber: 172,\n                            columnNumber: 33\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 170,\n                          columnNumber: 27\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 169,\n                        columnNumber: 25\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 168,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 167,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 109,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 108,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 107,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 7\n      }, this);\n    }\n  }]);\n\n  return EnquiryList;\n}(Component);\n\nEnquiryList.propTypes = {\n  enquiry: PropTypes.object.isRequired\n};\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    data: state.enquiry.enquiryList,\n    pager: state.enquiry.pager,\n    partDetails: state.enquiry.partDetails\n  };\n};\n\nexport default connect(mapStateToProps, {\n  loadEnquiryCarDetails: loadEnquiryCarDetails,\n  loadEnquiryPartDetails: loadEnquiryPartDetails,\n  deleteEnquiry: deleteEnquiry\n})(EnquiryList);","map":{"version":3,"sources":["/Users/irfan/projects/local/trunk-user-interface-stand-alone/src/public/enquiry/enquiryList.js"],"names":["React","Component","CCard","CCardBody","CCol","CFade","CRow","CIcon","PropTypes","connect","PartDetails","loadEnquiryCarDetails","loadEnquiryPartDetails","deleteEnquiry","Link","EnquiryList","props","params","URLSearchParams","location","search","page","parseInt","get","pager","currentPage","query","pages","delete","id","window","confirm","edit","history","push","state","EnquiryID","prevProps","totalItems","date","hours","getHours","minutes","getMinutes","ampm","strTime","datas","enquiryID","setState","data","partDetails","enquiryList","map","item","index","Date","CreatedOn","longMonth","toLocaleString","month","day","getDate","year","getFullYear","time","formatAMPM","items","enquiryPartHeaders","getPartDetail","ID","length","startIndex","customer","CompanyName","ChassisNO","manufacture","Name","Year","car","CarName","Variant","filter","e","PartNumber","totalPages","propTypes","enquiry","object","isRequired","mapStateToProps"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport {\n  CCard,\n  CCardBody,\n  CCol,\n  CFade,\n  CRow,\n} from '@coreui/react'\nimport CIcon from '@coreui/icons-react';\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\nimport PartDetails from './container/partDetails';\nimport { \n  loadEnquiryCarDetails, \n  loadEnquiryPartDetails,\n  deleteEnquiry,\n} from 'src/modules/enquiry/actions';\nimport { Link } from 'react-router-dom';\n\nclass EnquiryList extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      EnquiryID: '',\n    }\n  }\n\n  componentDidMount() {\n    this.loadEnquiryCarDetails();\n  }\n\n  componentDidUpdate(prevProps) {\n    // if (prevProps.pager.currentPage e) {\n    //   this.loadEnquiryCarDetails();\n    // }\n    if(prevProps.pager.totalItems > 0)\n    {\n      this.loadEnquiryCarDetails();\n    }\n    \n  }\n\n  loadEnquiryCarDetails = () => {\n    const params = new URLSearchParams(this.props.location.search);\n    const page = parseInt(params.get('page')) || 1;\n    // if(this.props.pager.totalItems === 0)\n    // {\n    //   var currentPage = 1;\n    //   var page = 0;\n    // }\n    // else\n    // {\n    //   var currentPage = this.props.pager.currentPage;\n    //   var page = parseInt(params.get('page'));\n    // }\n    if (page !== this.props.pager.currentPage) {\n      const query = {};\n      query.pages = page;\n      this.props.loadEnquiryCarDetails({ query });\n    }\n  }\n\nformatAMPM(date) {\n  var hours = date.getHours();\n  var minutes = date.getMinutes();\n  var ampm = hours >= 12 ? 'pm' : 'am';\n  hours = hours % 12;\n  hours = hours ? hours : 12;\n  minutes = minutes < 10 ? '0'+minutes : minutes;\n  var strTime = hours + ':' + minutes + ' ' + ampm;\n  return strTime;\n}\n\ngetPartDetail(id){\n  const datas = {};\n  datas.enquiryID = id;\n  this.props.loadEnquiryPartDetails(datas);\n  this.setState({\n    EnquiryID: id\n  });\n}\n\ndelete = (id) => {\n  if (window.confirm(\"Are you sure?\")) {\n    this.props.deleteEnquiry({id});  \n  }  \n} \n\nedit = (id) => {\n  if (window.confirm(\"Are you sure?\")) {\n    // this.props.history.push({\n    //   pathname: './enquiry-vehicle',\n    //   state: {\n    //     enquiryID: id,\n    //   },\n    // })\n    this.props.history.push(`./edit-enquiry-vehicle/${id}`);\n  } \n}\n\nrender() {\n  const { data, partDetails, pager, enquiryList} = this.props;\n  return (\n      <CRow className=\"text-center justify-content-center list-table\">\n          <CCol xs=\"12\" sm=\"12\" lg=\"12\">\n            <CFade>\n              <CCard>\n                <CCardBody>\n                  <table className=\"table table-striped\">\n                    <thead>\n                      <tr>\n                        <td>#</td>\n                        <th>Customer</th>\n                        <th>Chassis number</th>\n                        <th>Vehicle</th>\n                        <th>Item</th>\n                        <th>Enquiry Date</th>\n                        <th>Status</th>\n                        {/* <th>Print</th> */}\n                        <th>Action</th>\n                      </tr>\n                    </thead>\n                    <tbody>\n                    {\n                      enquiryList ? enquiryList.map((item, index) => {\n                          let date = new Date(item.CreatedOn);\n                          let longMonth = date.toLocaleString('en-us', { month: 'long' });\n                          let day = date.getDate();\n                          let year = date.getFullYear();\n                          let time = this.formatAMPM(date);\n                          let items = item.enquiryPartHeaders;\n                          return(\n                            <>\n                            <tr className='expandable-row'>\n                              {/* <tr onClick={() => this.getPartDetail(item.ID)}> */}\n                                <td onClick={() => this.getPartDetail(item.ID)} >{pager.pages && pager.pages.length ? pager.startIndex + index +1: index+1}</td>\n                                <td onClick={() => this.getPartDetail(item.ID)} >{item.customer.CompanyName }</td>\n                                <td onClick={() => this.getPartDetail(item.ID)} >{item.ChassisNO}</td>\n                                <td onClick={() => this.getPartDetail(item.ID)} >{item.manufacture.Name}, {item.Year}, {item.car.CarName}, {item.Variant}</td>\n                                <td onClick={() => this.getPartDetail(item.ID)} >{items.filter(e => e.PartNumber !== 'parentHeader').length}</td>\n                                <td onClick={() => this.getPartDetail(item.ID)} >{day} { longMonth } { year }, {time}</td>\n                                <td onClick={() => this.getPartDetail(item.ID)} ><span className='badge badge-pill badge-danger'>{items.filter(e => e.PartNumber !== 'parentHeader').length === 0 ? 'Pending': 'Open'}</span></td>\n                                <td>\n                                  {/* <button onClick={() => this.getPartDetail(item.ID)}>\n                                    <CIcon name=\"cil-chevron-bottom\" height=\"18\" alt=\"view\" />\n                                  </button> */}\n                                  <button onClick={() => this.edit(item.ID)} className=\"action-button\">\n                                    <CIcon name=\"cil-pencil\" height=\"18\" alt=\"edit\"/>\n                                  </button>\n                                  <button onClick={() => this.delete(item.ID)} className=\"action-button\">\n                                    <CIcon name=\"cil-trash\" height=\"18\" alt=\"delete\"/>\n                                  </button>\n                                </td>\n                              </tr>\n                              {\n                                item.ID === this.state.EnquiryID ?\n                                <PartDetails partDetails={partDetails}  />\n                                :\n                                null\n                              }\n                              \n                            </>\n                          )\n                      }): null\n                    }\n                    </tbody>\n                    <tfoot>\n                      <tr>\n                        <td colSpan=\"9\">\n                          <div className=\"float-right\">\n                            {pager.pages && pager.pages.length &&\n                                <ul className=\"pagination\">\n                                    <li className={`page-item first-item ${pager.currentPage === 1 ? 'disabled' : ''}`}>\n                                        <Link to={{ search: `?page=1` }} className=\"page-link\">First</Link>\n                                    </li>\n                                    <li className={`page-item previous-item ${pager.currentPage === 1 ? 'disabled' : ''}`}>\n                                        <Link to={{ search: `?page=${pager.currentPage - 1}` }} className=\"page-link\">Previous</Link>\n                                    </li>\n                                    {pager.pages.map(page =>\n                                        <li key={page} className={`page-item number-item ${pager.currentPage === page ? 'active' : ''}`}>\n                                            <Link id={pager.currentPage} to={{ search: `?page=${page}` }} className=\"page-link\">{page}</Link>\n                                        </li>\n                                    )}\n                                    <li className={`page-item next-item ${pager.currentPage === pager.totalPages ? 'disabled' : ''}`}>\n                                        <Link to={{ search: `?page=${pager.currentPage + 1}` }} className=\"page-link\">Next</Link>\n                                    </li>\n                                    <li className={`page-item last-item ${pager.currentPage === pager.totalPages ? 'disabled' : ''}`}>\n                                        <Link to={{ search: `?page=${pager.totalPages}` }} className=\"page-link\">Last</Link>\n                                    </li>\n                                </ul>\n                            }                    \n                          </div>\n                        </td>\n                      </tr>\n                    </tfoot>\n                  </table>\n                </CCardBody>\n              </CCard>\n            </CFade>\n          </CCol>\n      </CRow>\n    )\n  }\n}\n\nEnquiryList.propTypes = {\n  enquiry: PropTypes.object.isRequired,\n};\nconst mapStateToProps = state => ({\n  data: state.enquiry.enquiryList,\n  pager: state.enquiry.pager,\n  partDetails: state.enquiry.partDetails\n});\nexport default connect(\nmapStateToProps,\n{ \n  loadEnquiryCarDetails, \n  loadEnquiryPartDetails,\n  deleteEnquiry \n}\n)(EnquiryList);\n"]},"metadata":{},"sourceType":"module"}