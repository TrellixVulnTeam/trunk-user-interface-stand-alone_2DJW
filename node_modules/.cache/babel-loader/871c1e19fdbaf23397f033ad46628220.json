{"ast":null,"code":"import _defineProperty from \"/Users/irfan/projects/local/trunk-user-interface-stand-alone/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/irfan/projects/local/trunk-user-interface-stand-alone/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/irfan/projects/local/trunk-user-interface-stand-alone/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"/Users/irfan/projects/local/trunk-user-interface-stand-alone/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/Users/irfan/projects/local/trunk-user-interface-stand-alone/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/Users/irfan/projects/local/trunk-user-interface-stand-alone/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"/Users/irfan/projects/local/trunk-user-interface-stand-alone/src/public/masters/cars.js\";\nimport React, { Component } from 'react';\nimport { CForm, CCard, CCardBody, CCol, CRow, CFormGroup, CInput, CButton } from '@coreui/react';\nimport CIcon from '@coreui/icons-react';\nimport PropTypes from \"prop-types\";\nimport CreatableSelect from 'react-select/creatable';\nimport { connect } from \"react-redux\";\nimport { createCar, loadCar, deleteCar, updateCar } from 'src/modules/masters/car/actions';\nimport { NotificationContainer, NotificationManager } from 'react-notifications';\nimport 'react-notifications/lib/notifications.css';\nimport { Link } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nvar Make = /*#__PURE__*/function (_Component) {\n  _inherits(Make, _Component);\n\n  var _super = _createSuper(Make);\n\n  function Make(props) {\n    var _this;\n\n    _classCallCheck(this, Make);\n\n    _this = _super.call(this, props);\n\n    _this.delete = function (id) {\n      if (window.confirm(\"Are you sure?\")) {\n        _this.props.deleteCar({\n          id: id\n        });\n      }\n    };\n\n    _this.edit = function (data) {\n      _this.setState({\n        manufacture: {\n          'value': data.ManufactureID,\n          'label': data.manufacture.Name\n        },\n        carName: data.CarName,\n        ID: data.ID,\n        button: 'UPDATE'\n      });\n    };\n\n    _this.update = function (e) {\n      e.preventDefault();\n      var formData = _this.state;\n\n      if (formData.manufacture === \"\") {\n        NotificationManager.warning(\"Manufacture is required\");\n        return false;\n      }\n\n      if (formData.carName === \"\") {\n        NotificationManager.warning(\"Car is required\");\n        return false;\n      }\n\n      var datas = {};\n      datas.manufacture = formData.manufacture.value;\n      datas.carName = formData.carName;\n      datas.id = formData.ID;\n\n      _this.props.updateCar({\n        datas: datas\n      });\n\n      _this.setState({\n        carName: '',\n        manufacture: ''\n      });\n    };\n\n    _this.clear = function () {\n      _this.setState({\n        manufacture: '',\n        button: 'ADD',\n        carName: ''\n      });\n    };\n\n    _this.loadCar = function () {\n      var params = new URLSearchParams(_this.props.location.search);\n      var page = parseInt(params.get('page')) || 1;\n\n      if (_this.props.pager.totalItems === 0) {\n        var currentPage = 1;\n      } else {\n        var currentPage = _this.props.pager.currentPage;\n      }\n\n      if (page !== currentPage) {\n        var query = {};\n        query.pages = page;\n\n        _this.props.loadCar({\n          query: query\n        });\n      }\n    };\n\n    _this.onChange = function (e) {\n      _this.setState(_defineProperty({}, e.target.id, e.target.value));\n    };\n\n    _this.handleChange = function (manufacture) {\n      _this.setState({\n        manufacture: manufacture\n      });\n    };\n\n    _this.add = function (e) {\n      e.preventDefault();\n      var formData = _this.state;\n\n      if (formData.manufacture === \"\") {\n        NotificationManager.warning(\"Manufacture is required\");\n        return false;\n      }\n\n      if (formData.carName === \"\") {\n        NotificationManager.warning(\"Car is required\");\n        return false;\n      }\n\n      var car = {};\n      car.manufacture = formData.manufacture.value;\n      car.carName = formData.carName;\n\n      _this.props.createCar(car);\n\n      _this.setState({\n        carName: '',\n        manufacture: ''\n      });\n    };\n\n    _this.state = {\n      manufacture: '',\n      carName: '',\n      button: 'ADD',\n      ID: ''\n    };\n    _this.loadCar = _this.loadCar.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(Make, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.loadCar();\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      var _this$props = this.props,\n          createSuccess = _this$props.createSuccess,\n          createError = _this$props.createError,\n          deleteSuccess = _this$props.deleteSuccess,\n          deleteError = _this$props.deleteError,\n          updateSuccess = _this$props.updateSuccess,\n          updateError = _this$props.updateError;\n      var prevCreateSuccess = prevProps.createSuccess,\n          prevcreateError = prevProps.createError,\n          prevdeleteSuccess = prevProps.deleteSuccess,\n          prevdeleteError = prevProps.deleteError,\n          prevupdateSuccess = prevProps.updateSuccess,\n          prevupdateError = prevProps.updateError; // create success\n\n      if (createSuccess && createSuccess !== prevCreateSuccess) {\n        NotificationManager.success(\"Manufacture created successfully\");\n      } // create success\n\n\n      if (createError !== null && createError !== prevcreateError) {\n        NotificationManager.error(createError);\n      } // delete success\n\n\n      if (deleteSuccess && deleteSuccess !== prevdeleteSuccess) {\n        NotificationManager.warning(\"Manufacture deleted successfully\");\n      } // delete error\n\n\n      if (deleteError && deleteError !== prevdeleteError) {\n        NotificationManager.error(deleteError);\n      } // update success\n\n\n      if (updateSuccess && updateSuccess !== prevupdateSuccess) {\n        NotificationManager.success(\"Manufacture updated successfully\");\n      } // update error\n\n\n      if (updateError && updateError !== prevupdateError) {\n        NotificationManager.error(updateError);\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props2 = this.props,\n          manufacture = _this$props2.manufacture,\n          car = _this$props2.car,\n          pager = _this$props2.pager;\n      var options = manufacture ? manufacture.map(function (item, index) {\n        return {\n          value: item.ID,\n          label: item.Name\n        };\n      }) : null;\n      return /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: /*#__PURE__*/_jsxDEV(CRow, {\n          children: [/*#__PURE__*/_jsxDEV(NotificationContainer, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 189,\n            columnNumber: 9\n          }, this), /*#__PURE__*/_jsxDEV(CCol, {\n            xs: \"12\",\n            lg: \"12\",\n            children: /*#__PURE__*/_jsxDEV(CCard, {\n              children: /*#__PURE__*/_jsxDEV(CCardBody, {\n                children: [/*#__PURE__*/_jsxDEV(CForm, {\n                  className: \"form-horizontal\",\n                  noValidate: true,\n                  onSubmit: this.state.button === 'ADD' ? this.add : this.update,\n                  children: /*#__PURE__*/_jsxDEV(CFormGroup, {\n                    row: true,\n                    children: [/*#__PURE__*/_jsxDEV(CCol, {\n                      xs: \"4\",\n                      md: \"4\",\n                      children: /*#__PURE__*/_jsxDEV(CreatableSelect, {\n                        isClearable: true,\n                        id: \"manufacture\",\n                        name: \"manufacture\",\n                        value: this.state.manufacture,\n                        options: options,\n                        placeholder: \"Eg: Toyota\",\n                        onChange: this.handleChange\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 196,\n                        columnNumber: 25\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 195,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(CCol, {\n                      xs: \"4\",\n                      md: \"4\",\n                      children: /*#__PURE__*/_jsxDEV(CInput, {\n                        type: \"text\",\n                        id: \"carName\",\n                        name: \"carName\",\n                        value: this.state.carName,\n                        placeholder: \"Eg: Yaris\",\n                        onChange: this.onChange\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 207,\n                        columnNumber: 25\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 206,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(CCol, {\n                      xs: \"4\",\n                      md: \"2\",\n                      children: /*#__PURE__*/_jsxDEV(CButton, {\n                        type: \"submit\",\n                        className: \"float-right btn-block\",\n                        color: \"primary\",\n                        children: [/*#__PURE__*/_jsxDEV(CIcon, {\n                          name: \"cil-save\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 217,\n                          columnNumber: 98\n                        }, this), \"\\xA0\", this.state.button]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 217,\n                        columnNumber: 25\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 216,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(CCol, {\n                      xs: \"4\",\n                      md: \"2\",\n                      children: /*#__PURE__*/_jsxDEV(CButton, {\n                        onClick: function onClick() {\n                          return _this2.clear();\n                        },\n                        type: \"button\",\n                        className: \"float-right btn-block\",\n                        color: \"secondary\",\n                        children: [/*#__PURE__*/_jsxDEV(CIcon, {\n                          name: \"cil-x\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 222,\n                          columnNumber: 129\n                        }, this), \"\\xA0 CLEAR\"]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 222,\n                        columnNumber: 25\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 221,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 194,\n                    columnNumber: 19\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 193,\n                  columnNumber: 17\n                }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n                  className: \"table table-striped\",\n                  children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n                    children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                      children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                        children: /*#__PURE__*/_jsxDEV(\"span\", {\n                          children: \"#\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 232,\n                          columnNumber: 29\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 231,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                        children: /*#__PURE__*/_jsxDEV(\"span\", {\n                          children: \"Car\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 235,\n                          columnNumber: 31\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 234,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                        children: /*#__PURE__*/_jsxDEV(\"span\", {\n                          children: \"Manufacture\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 238,\n                          columnNumber: 29\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 237,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                        children: /*#__PURE__*/_jsxDEV(\"span\", {\n                          children: \"Action\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 241,\n                          columnNumber: 31\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 240,\n                        columnNumber: 27\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 230,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 229,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n                    children: car ? car.map(function (item, index) {\n                      return /*#__PURE__*/_jsxDEV(\"tr\", {\n                        className: \"expandable-row\",\n                        children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                          children: pager.pages && pager.pages.length ? pager.startIndex + index + 1 : index + 1\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 248,\n                          columnNumber: 29\n                        }, _this2), /*#__PURE__*/_jsxDEV(\"td\", {\n                          children: item.CarName\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 249,\n                          columnNumber: 29\n                        }, _this2), /*#__PURE__*/_jsxDEV(\"td\", {\n                          children: item.manufacture.Name\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 250,\n                          columnNumber: 29\n                        }, _this2), /*#__PURE__*/_jsxDEV(\"td\", {\n                          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                            className: \"action-button\",\n                            children: /*#__PURE__*/_jsxDEV(CIcon, {\n                              onClick: function onClick() {\n                                return _this2.edit(item);\n                              },\n                              name: \"cil-pencil\",\n                              height: \"18\",\n                              alt: \"Edit\"\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 255,\n                              columnNumber: 35\n                            }, _this2)\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 254,\n                            columnNumber: 33\n                          }, _this2), /*#__PURE__*/_jsxDEV(\"button\", {\n                            className: \"action-button\",\n                            children: /*#__PURE__*/_jsxDEV(CIcon, {\n                              onClick: function onClick() {\n                                return _this2.delete(item.ID);\n                              },\n                              name: \"cil-trash\",\n                              height: \"18\",\n                              alt: \"Delete\"\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 258,\n                              columnNumber: 35\n                            }, _this2)\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 257,\n                            columnNumber: 33\n                          }, _this2)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 253,\n                          columnNumber: 29\n                        }, _this2)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 247,\n                        columnNumber: 25\n                      }, _this2);\n                    }) : 'null'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 245,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"tfoot\", {\n                    children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                      children: /*#__PURE__*/_jsxDEV(\"td\", {\n                        colSpan: \"4\",\n                        children: /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"float-right\",\n                          children: pager.pages && pager.pages.length > 0 && /*#__PURE__*/_jsxDEV(\"ul\", {\n                            className: \"pagination\",\n                            children: [/*#__PURE__*/_jsxDEV(\"li\", {\n                              className: \"page-item first-item \".concat(pager.currentPage === 1 ? 'disabled' : ''),\n                              children: /*#__PURE__*/_jsxDEV(Link, {\n                                to: {\n                                  search: \"?page=1\"\n                                },\n                                className: \"page-link\",\n                                children: \"First\"\n                              }, void 0, false, {\n                                fileName: _jsxFileName,\n                                lineNumber: 271,\n                                columnNumber: 41\n                              }, this)\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 270,\n                              columnNumber: 37\n                            }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                              className: \"page-item previous-item \".concat(pager.currentPage === 1 ? 'disabled' : ''),\n                              children: /*#__PURE__*/_jsxDEV(Link, {\n                                to: {\n                                  search: \"?page=\".concat(pager.currentPage - 1)\n                                },\n                                className: \"page-link\",\n                                children: \"Previous\"\n                              }, void 0, false, {\n                                fileName: _jsxFileName,\n                                lineNumber: 274,\n                                columnNumber: 41\n                              }, this)\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 273,\n                              columnNumber: 37\n                            }, this), pager.pages.map(function (page) {\n                              return /*#__PURE__*/_jsxDEV(\"li\", {\n                                className: \"page-item number-item \".concat(pager.currentPage === page ? 'active' : ''),\n                                children: /*#__PURE__*/_jsxDEV(Link, {\n                                  id: pager.currentPage,\n                                  to: {\n                                    search: \"?page=\".concat(page)\n                                  },\n                                  className: \"page-link\",\n                                  children: page\n                                }, void 0, false, {\n                                  fileName: _jsxFileName,\n                                  lineNumber: 278,\n                                  columnNumber: 45\n                                }, _this2)\n                              }, page, false, {\n                                fileName: _jsxFileName,\n                                lineNumber: 277,\n                                columnNumber: 41\n                              }, _this2);\n                            }), /*#__PURE__*/_jsxDEV(\"li\", {\n                              className: \"page-item next-item \".concat(pager.currentPage === pager.totalPages ? 'disabled' : ''),\n                              children: /*#__PURE__*/_jsxDEV(Link, {\n                                to: {\n                                  search: \"?page=\".concat(pager.currentPage + 1)\n                                },\n                                className: \"page-link\",\n                                children: \"Next\"\n                              }, void 0, false, {\n                                fileName: _jsxFileName,\n                                lineNumber: 282,\n                                columnNumber: 41\n                              }, this)\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 281,\n                              columnNumber: 37\n                            }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                              className: \"page-item last-item \".concat(pager.currentPage === pager.totalPages ? 'disabled' : ''),\n                              children: /*#__PURE__*/_jsxDEV(Link, {\n                                to: {\n                                  search: \"?page=\".concat(pager.totalPages)\n                                },\n                                className: \"page-link\",\n                                children: \"Last\"\n                              }, void 0, false, {\n                                fileName: _jsxFileName,\n                                lineNumber: 285,\n                                columnNumber: 41\n                              }, this)\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 284,\n                              columnNumber: 37\n                            }, this)]\n                          }, void 0, true, {\n                            fileName: _jsxFileName,\n                            lineNumber: 269,\n                            columnNumber: 33\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 267,\n                          columnNumber: 27\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 266,\n                        columnNumber: 25\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 265,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 264,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 228,\n                  columnNumber: 17\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 192,\n                columnNumber: 15\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 191,\n              columnNumber: 13\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 190,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 9\n        }, this)\n      }, void 0, false);\n    }\n  }]);\n\n  return Make;\n}(Component);\n\nMake.propTypes = {\n  manufacture: PropTypes.object.isRequired,\n  car: PropTypes.object.isRequired\n};\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    manufacture: state.car.manufactures,\n    car: state.car.cars,\n    pager: state.car.pager,\n    createSuccess: state.car.createSuccess,\n    createError: state.car.createError,\n    deleteSuccess: state.car.deleteSuccess,\n    deleteError: state.car.deleteError,\n    updateSuccess: state.car.updateSuccess,\n    updateError: state.car.updateError\n  };\n};\n\nexport default connect(mapStateToProps, {\n  createCar: createCar,\n  loadCar: loadCar,\n  deleteCar: deleteCar,\n  updateCar: updateCar\n})(Make);","map":{"version":3,"sources":["/Users/irfan/projects/local/trunk-user-interface-stand-alone/src/public/masters/cars.js"],"names":["React","Component","CForm","CCard","CCardBody","CCol","CRow","CFormGroup","CInput","CButton","CIcon","PropTypes","CreatableSelect","connect","createCar","loadCar","deleteCar","updateCar","NotificationContainer","NotificationManager","Link","Make","props","delete","id","window","confirm","edit","data","setState","manufacture","ManufactureID","Name","carName","CarName","ID","button","update","e","preventDefault","formData","state","warning","datas","value","clear","params","URLSearchParams","location","search","page","parseInt","get","pager","totalItems","currentPage","query","pages","onChange","target","handleChange","add","car","bind","prevProps","createSuccess","createError","deleteSuccess","deleteError","updateSuccess","updateError","prevCreateSuccess","prevcreateError","prevdeleteSuccess","prevdeleteError","prevupdateSuccess","prevupdateError","success","error","options","map","item","index","label","length","startIndex","totalPages","propTypes","object","isRequired","mapStateToProps","manufactures","cars"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport {\n  CForm,\n  CCard,\n  CCardBody,\n  CCol,\n  CRow,\n  CFormGroup,\n  CInput,\n  CButton,\n} from '@coreui/react';\nimport CIcon from '@coreui/icons-react';\nimport PropTypes from \"prop-types\";\nimport CreatableSelect from 'react-select/creatable';\nimport { connect } from \"react-redux\";\nimport { createCar, loadCar, deleteCar, updateCar } from 'src/modules/masters/car/actions';\nimport { NotificationContainer, NotificationManager } from 'react-notifications';\nimport 'react-notifications/lib/notifications.css';\nimport { Link } from 'react-router-dom';\nclass Make extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      manufacture: '',\n      carName: '',\n      button: 'ADD',\n      ID: '',\n    }\n    this.loadCar = this.loadCar.bind(this);\n  }\n\n  delete = (id) => {\n    if (window.confirm(\"Are you sure?\")) {  \n      this.props.deleteCar({id});  \n    }  \n  } \n\n  edit = (data) => {\n    this.setState({\n      manufacture: { 'value': data.ManufactureID, 'label': data.manufacture.Name },\n      carName: data.CarName,\n      ID: data.ID,\n      button: 'UPDATE'\n    })\n  }\n\n  //update\n  update = e => {\n    e.preventDefault();\n    const formData = this.state;\n    if(formData.manufacture === \"\")\n    {\n      NotificationManager.warning(\"Manufacture is required\");\n      return false;\n    }\n\n    if(formData.carName === \"\")\n    {\n      NotificationManager.warning(\"Car is required\");\n      return false;\n    }\n    \n    const datas = {};\n    datas.manufacture = formData.manufacture.value;\n    datas.carName = formData.carName;\n    datas.id = formData.ID;\n    this.props.updateCar({datas});\n    this.setState({carName: '', manufacture: ''})\n  }\n\n  clear = () => {\n    this.setState({\n      manufacture: '',\n      button: 'ADD',\n      carName: ''\n    })\n  }\n\n  componentDidMount() {\n    this.loadCar();\n  }\n\n  componentDidUpdate( prevProps ) {\n    const { \n      createSuccess,\n      createError,\n      deleteSuccess,\n      deleteError,\n      updateSuccess,\n      updateError\n    } = this.props;\n    const { \n      createSuccess: prevCreateSuccess, \n      createError: prevcreateError,\n      deleteSuccess: prevdeleteSuccess ,\n      deleteError: prevdeleteError,\n      updateSuccess: prevupdateSuccess,\n      updateError: prevupdateError\n    } = prevProps;\n\n    // create success\n    if(createSuccess && createSuccess !== prevCreateSuccess) {\n        NotificationManager.success(\"Manufacture created successfully\");\n    }\n\n    // create success\n    if(createError !== null && createError !== prevcreateError) {\n        NotificationManager.error(createError);\n    }\n\n    // delete success\n    if(deleteSuccess && deleteSuccess !== prevdeleteSuccess) {\n        NotificationManager.warning(\"Manufacture deleted successfully\");\n    }\n\n    // delete error\n    if(deleteError && deleteError !== prevdeleteError) {\n        NotificationManager.error(deleteError);\n    }\n    // update success\n    if(updateSuccess && updateSuccess !== prevupdateSuccess) {\n      NotificationManager.success(\"Manufacture updated successfully\");\n    }\n\n    // update error\n    if(updateError && updateError !== prevupdateError) {\n      NotificationManager.error(updateError);\n    }\n    \n  }\n\n  loadCar = () => {\n    const params = new URLSearchParams(this.props.location.search);\n    const page = parseInt(params.get('page')) || 1;\n    if(this.props.pager.totalItems === 0)\n    {\n      var currentPage = 1;\n    }\n    else\n    {\n      var currentPage = this.props.pager.currentPage;\n    }\n    if (page !== currentPage) {\n      const query = {};\n      query.pages = page;\n      this.props.loadCar({ query });\n    }\n  }\n\n  onChange = e => {\n    this.setState({ [e.target.id]: e.target.value });\n  };\n\n  handleChange = ( manufacture ) => {\n    this.setState({ manufacture });\n  };\n\n  add = e => {\n    e.preventDefault();\n    const formData = this.state;\n    if(formData.manufacture === \"\")\n    {\n      NotificationManager.warning(\"Manufacture is required\");\n      return false;\n    }\n\n    if(formData.carName === \"\")\n    {\n      NotificationManager.warning(\"Car is required\");\n      return false;\n    }\n    \n    const car = {};\n    car.manufacture = formData.manufacture.value;\n    car.carName = formData.carName\n    this.props.createCar(car);\n    this.setState({carName: '', manufacture: ''})\n\n  };\n\n  render() {\n    const { manufacture, car, pager } = this.props;\n    const options = manufacture ? manufacture.map((item, index) => {\n      return { value: item.ID, label: item.Name }\n    }): null;\n    return (\n      <>\n        <CRow>\n        <NotificationContainer/>\n          <CCol xs=\"12\" lg=\"12\">\n            <CCard>\n              <CCardBody>\n                <CForm className=\"form-horizontal\" noValidate onSubmit={this.state.button === 'ADD' ? this.add: this.update}>\n                  <CFormGroup row>\n                      <CCol xs=\"4\" md=\"4\">\n                        <CreatableSelect\n                          isClearable\n                          id=\"manufacture\" \n                          name=\"manufacture\"\n                          value={this.state.manufacture}\n                          options={options}\n                          placeholder=\"Eg: Toyota\"\n                          onChange={this.handleChange}\n                        />\n                      </CCol>\n                      <CCol xs=\"4\" md=\"4\">\n                        <CInput \n                            type=\"text\" \n                            id=\"carName\" \n                            name=\"carName\"\n                            value={this.state.carName}\n                            placeholder=\"Eg: Yaris\"\n                            onChange={this.onChange}\n                          />\n                      </CCol>\n                      <CCol xs=\"4\" md=\"2\">\n                        <CButton type=\"submit\" className=\"float-right btn-block\" color=\"primary\"><CIcon name=\"cil-save\" />&nbsp;\n                           { this.state.button }\n                        </CButton>\n                      </CCol>\n                      <CCol xs=\"4\" md=\"2\">\n                        <CButton onClick={() => this.clear()} type=\"button\" className=\"float-right btn-block\" color=\"secondary\"><CIcon name=\"cil-x\" />&nbsp;\n                           CLEAR\n                        </CButton>\n                      </CCol>\n                  </CFormGroup>\n                </CForm>\n                <table className=\"table table-striped\">\n                    <thead>\n                      <tr>\n                          <th>\n                            <span>#</span>\n                          </th>\n                          <th>\n                              <span>Car</span>\n                          </th>\n                          <th>\n                            <span>Manufacture</span>\n                          </th>\n                          <th>\n                              <span>Action</span>\n                          </th>\n                      </tr>\n                    </thead>\n                    <tbody>\n                      {car ? car.map((item, index) => \n                        <tr className='expandable-row'>\n                            <td>{pager.pages && pager.pages.length ? pager.startIndex + index +1: index+1}</td>\n                            <td>{item.CarName}</td>\n                            <td>\n                                {item.manufacture.Name}\n                            </td>\n                            <td>\n                                <button className=\"action-button\">\n                                  <CIcon onClick={() => this.edit(item)} name=\"cil-pencil\" height=\"18\" alt=\"Edit\"/>\n                                </button>\n                                <button className=\"action-button\">\n                                  <CIcon onClick={() => this.delete(item.ID)} name=\"cil-trash\" height=\"18\" alt=\"Delete\"/>\n                                </button>\n                            </td>\n                        </tr>\n                      ):'null'}\n                    </tbody>\n                    <tfoot>\n                      <tr>\n                        <td colSpan=\"4\">\n                          <div className=\"float-right\">\n                            {pager.pages && pager.pages.length > 0 &&\n                                <ul className=\"pagination\">\n                                    <li className={`page-item first-item ${pager.currentPage === 1 ? 'disabled' : ''}`}>\n                                        <Link to={{ search: `?page=1` }} className=\"page-link\">First</Link>\n                                    </li>\n                                    <li className={`page-item previous-item ${pager.currentPage === 1 ? 'disabled' : ''}`}>\n                                        <Link to={{ search: `?page=${pager.currentPage - 1}` }} className=\"page-link\">Previous</Link>\n                                    </li>\n                                    {pager.pages.map(page =>\n                                        <li key={page} className={`page-item number-item ${pager.currentPage === page ? 'active' : ''}`}>\n                                            <Link id={pager.currentPage} to={{ search: `?page=${page}` }} className=\"page-link\">{page}</Link>\n                                        </li>\n                                    )}\n                                    <li className={`page-item next-item ${pager.currentPage === pager.totalPages ? 'disabled' : ''}`}>\n                                        <Link to={{ search: `?page=${pager.currentPage + 1}` }} className=\"page-link\">Next</Link>\n                                    </li>\n                                    <li className={`page-item last-item ${pager.currentPage === pager.totalPages ? 'disabled' : ''}`}>\n                                        <Link to={{ search: `?page=${pager.totalPages}` }} className=\"page-link\">Last</Link>\n                                    </li>\n                                </ul>\n                            }                    \n                          </div>\n                        </td>\n                      </tr>\n                    </tfoot>\n                </table>\n              </CCardBody>\n            </CCard>\n          </CCol>\n        </CRow>\n      </>\n    )\n  }\n}\n\nMake.propTypes = {\n  manufacture: PropTypes.object.isRequired,\n  car: PropTypes.object.isRequired\n};\n\n\nconst mapStateToProps = state => ({\n  manufacture: state.car.manufactures,\n  car: state.car.cars,\n  pager: state.car.pager,\n  createSuccess: state.car.createSuccess,\n  createError: state.car.createError,\n  deleteSuccess: state.car.deleteSuccess,\n  deleteError: state.car.deleteError,\n  updateSuccess: state.car.updateSuccess,\n  updateError: state.car.updateError\n});\n\n\nexport default connect(\n  mapStateToProps,\n  { createCar, loadCar, deleteCar, updateCar }\n)( Make );\n"]},"metadata":{},"sourceType":"module"}